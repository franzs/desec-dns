interactions:
- request:
    body: '{"name": "test-suite.test"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '27'
      Content-Type:
      - application/json
      authorization:
      - Token XXXXXXXX
    method: POST
    uri: https://desec.io/api/v1/domains/
  response:
    body:
      string: '{"created":"2024-01-01T00:00:00.000000Z","published":null,"name":"test-suite.test","keys":[{"dnskey":"257
        3 13 Abi+96xuHD5TQKZ9kgUHPVtgYOIdAacrZ51KAHvGimZ3NGHDtQfrQ/Ct2toDrM1fR3PD5AP1nWRvWGbG+ndcvA==","ds":["18562
        13 2 aa8d3d43c7c7fbd0046d918d3c0160814e8a1e3f635f17274ca1ff68cea7efe8","18562
        13 4 f89cb3bf42237660d6f9e19c9204488c955b3fc3748354a8c46f8a1947c96cf8e846d39c778b3f407115d122887c6a09"],"flags":257,"keytype":"csk","managed":true}],"minimum_ttl":3600,"touched":"2024-01-01T00:00:00.000000Z"}'
    headers:
      Allow:
      - GET, POST, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '500'
      Content-Type:
      - application/json
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 201
      message: Created
- request:
    body: '{"name": ""}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '12'
      Content-Type:
      - application/json
      authorization:
      - Token XXXXXXXX
    method: POST
    uri: https://desec.io/api/v1/auth/tokens/
  response:
    body:
      string: '{"id":"142814a9-787c-4d8d-bd40-26fce5dc2be2","created":"2024-01-01T00:00:00.000000Z","last_used":null,"max_age":null,"max_unused_period":null,"name":"","perm_manage_tokens":false,"allowed_subnets":["0.0.0.0/0","::/0"],"is_valid":true,"token":"19DXmWWHtkEEJKg6bWyM7wL7FM8H"}'
    headers:
      Allow:
      - GET, POST, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '273'
      Content-Type:
      - application/json
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 201
      message: Created
- request:
    body: '{"domain": null, "subname": null, "type": null, "perm_write": false}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '68'
      Content-Type:
      - application/json
      authorization:
      - Token XXXXXXXX
    method: POST
    uri: https://desec.io/api/v1/auth/tokens/142814a9-787c-4d8d-bd40-26fce5dc2be2/policies/rrsets/
  response:
    body:
      string: '{"id":"6d8ce4ed-8956-4627-be12-1561dc48f78e","domain":null,"subname":null,"type":null,"perm_write":false}'
    headers:
      Allow:
      - GET, POST, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '105'
      Content-Type:
      - application/json
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 201
      message: Created
- request:
    body: '{"domain": null, "subname": "test", "type": "A", "perm_write": false}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '69'
      Content-Type:
      - application/json
      authorization:
      - Token XXXXXXXX
    method: POST
    uri: https://desec.io/api/v1/auth/tokens/142814a9-787c-4d8d-bd40-26fce5dc2be2/policies/rrsets/
  response:
    body:
      string: '{"id":"536d0d79-8657-402d-9f30-272b2b6c2fa0","domain":null,"subname":"test","type":"A","perm_write":false}'
    headers:
      Allow:
      - GET, POST, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '106'
      Content-Type:
      - application/json
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 201
      message: Created
- request:
    body: '{"subname": "test2", "type": "AAAA", "perm_write": true}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '56'
      Content-Type:
      - application/json
      authorization:
      - Token XXXXXXXX
    method: PATCH
    uri: https://desec.io/api/v1/auth/tokens/142814a9-787c-4d8d-bd40-26fce5dc2be2/policies/rrsets/536d0d79-8657-402d-9f30-272b2b6c2fa0/
  response:
    body:
      string: '{"id":"536d0d79-8657-402d-9f30-272b2b6c2fa0","domain":null,"subname":"test2","type":"AAAA","perm_write":true}'
    headers:
      Allow:
      - GET, PUT, PATCH, DELETE, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '109'
      Content-Type:
      - application/json
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '0'
      authorization:
      - Token XXXXXXXX
    method: DELETE
    uri: https://desec.io/api/v1/auth/tokens/142814a9-787c-4d8d-bd40-26fce5dc2be2/
  response:
    body:
      string: ''
    headers:
      Allow:
      - GET, PUT, PATCH, DELETE, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 204
      message: No Content
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Content-Length:
      - '0'
      authorization:
      - Token XXXXXXXX
    method: DELETE
    uri: https://desec.io/api/v1/domains/test-suite.test/
  response:
    body:
      string: ''
    headers:
      Allow:
      - GET, DELETE, HEAD, OPTIONS
      Cache-Control:
      - no-cache
      Connection:
      - keep-alive
      Content-Length:
      - '0'
      Date:
      - Mon, 01 Jan 2024 00:00:00 GMT
      Expires:
      - Thu, 01 Jan 1970 00:00:01 GMT
      Server:
      - nginx
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Vary:
      - origin
    status:
      code: 204
      message: No Content
version: 1
